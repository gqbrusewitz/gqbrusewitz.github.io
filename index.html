<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Weight What-If Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <!-- Chart.js for the composition chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <header class="app-header">
    <div class="app-header-inner">
      <h1>Weight What-If</h1>
      <p>Play with “what-if” scenarios for your weight, fat, and muscle.</p>
    </div>
  </header>

  <main class="app-main">
    <section class="cards-grid">

      <!-- Current stats -->
      <section class="card">
        <h2>Current Stats</h2>
        <p class="card-subtitle">Enter your latest numbers from your scale.</p>

        <div class="field">
          <label for="currentWeight">Total weight (lbs)</label>
          <input id="currentWeight" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="currentFat">Body fat mass (lbs)</label>
          <input id="currentFat" type="number" step="0.01" />
        </div>

        <div class="field">
          <label for="currentMuscle">Muscle mass (lbs)</label>
          <input id="currentMuscle" type="number" step="0.01" />
        </div>

        <div class="summary">
          <h3>Current Composition</h3>
          <ul>
            <li>Body fat: <span id="currentFatPct">0.0</span>%</li>
            <li>Muscle: <span id="currentMusclePct">0.0</span>%</li>
            <li>Bone (auto): <span id="currentBonePct">0.0</span>%</li>
          </ul>
        </div>
      </section>

      <!-- What-if goal -->
      <section class="card">
        <h2>What-If Goal</h2>
        <p class="card-subtitle">Choose a goal type and enter values.</p>

        <div class="field">
          <label for="targetType">Goal type</label>
          <select id="targetType">
            <option value="same_weight">Keep same weight & composition</option>
            <option value="target_weight">Target weight (lbs)</option>
            <option value="target_fat_mass">Target body fat (lbs)</option>
            <option value="target_fat_pct">Target body fat (%)</option>
            <option value="target_muscle_mass">Target muscle (lbs)</option>
            <option value="target_muscle_pct">Target muscle (%)</option>
            <option value="target_weight_fat_pct">Target weight + body fat %</option>
            <option value="target_weight_muscle_pct">Target weight + muscle %</option>
          </select>
        </div>

        <!-- Primary goal value -->
        <div class="field">
          <label id="targetValueLabel" for="targetValue">Goal value</label>
          <input id="targetValue" type="number" step="0.01" />
        </div>

        <!-- Secondary goal value -->
        <div class="field" id="targetValue2Wrapper" style="display:none;">
          <label id="targetValue2Label" for="targetValue2">Second goal value</label>
          <input id="targetValue2" type="number" step="0.01" />
        </div>

        <small id="targetHelper" style="color:#9ca3af;font-size:0.75rem;">
          Using your current weight and composition.
        </small>

        <button id="copyCurrentToTarget" class="button button-secondary" style="margin-top:0.6rem;">
          Reset to “same weight”
        </button>

        <div class="summary" style="margin-top:0.8rem;">
          <h3>Target Composition</h3>
          <ul>
            <li>Body fat: <span id="targetFatPct">0.0</span>%</li>
            <li>Muscle: <span id="targetMusclePct">0.0</span>%</li>
            <li>Bone (auto): <span id="targetBonePct">0.0</span>%</li>
          </ul>
        </div>
      </section>

      <!-- Differences -->
      <section class="card">
        <h2>Changes Needed</h2>
        <p class="card-subtitle">How different is your what-if from today?</p>

        <div class="result-line">
          <span class="result-label">Weight difference:</span>
          <span id="weightDiffText" class="result-value">No change</span>
        </div>
        <div class="result-line">
          <span class="result-label">Body fat change:</span>
          <span id="fatChangeText" class="result-value">No change</span>
        </div>
        <div class="result-line">
          <span class="result-label">Muscle change:</span>
          <span id="muscleChangeText" class="result-value">No change</span>
        </div>

        <hr class="divider" />

        <h3>Quick Summary</h3>
        <p id="quickSummary" class="quick-summary">
          Enter your stats and select a goal to see differences.
        </p>
      </section>

      <!-- Scenarios -->
      <section class="card">
        <h2>Saved Scenarios</h2>
        <p class="card-subtitle">Save what-if states & load them anytime.</p>

        <div class="field inline-field">
          <label for="scenarioName">Scenario name</label>
          <input id="scenarioName" type="text" placeholder="e.g. Spring Cut" />
        </div>

        <button id="saveScenarioButton" class="button">Save current state</button>

        <ul id="scenarioList" class="scenario-list"></ul>
      </section>

    </section>

    <!-- Chart -->
    <section class="card chart-card">
      <h2>Body Composition Chart</h2>
      <p class="card-subtitle">Current vs What-If (Stacked)</p>
      <canvas id="compositionChart"></canvas>
    </section>
  </main>

  <footer class="app-footer">
    <p>
      Built for “what-if” experiments — deploy on GitHub Pages and tweak freely.
    </p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
